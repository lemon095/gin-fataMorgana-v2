# 错误码文档

## 概述
本文档定义了项目中所有错误码，每个错误码对应一种具体的错误情况，确保错误码与错误消息的一一对应关系。

## 错误码分类

### 1. 系统级错误码 (0-999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 0 | 操作成功 | 请求处理成功 |
| 1 | 操作失败 | 一般性操作失败 |
| 401 | 认证失败 | 用户认证失败 |
| 403 | 禁止访问 | 权限不足 |
| 404 | 资源不存在 | 请求的资源不存在 |
| 422 | 数据验证失败 | 请求数据验证失败 |
| 500 | 服务器内部错误 | 服务器内部错误 |

### 2. 数据库和缓存错误码 (1000-1999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 1001 | 数据库操作失败 | 数据库操作异常 |
| 1002 | Redis操作失败 | Redis操作异常 |
| 1003 | 参数错误 | 请求参数错误 |
| 1004 | 操作失败 | 业务操作失败 |
| 1005 | 用户不存在 | 用户记录不存在 |
| 1006 | 用户已存在 | 用户记录已存在 |
| 1007 | 验证失败 | 数据验证失败 |
| 1008 | 账户已被锁定 | 用户账户被锁定 |
| 1009 | 当前系统不允许注册 | 注册功能已关闭 |
| 1010 | 拼单不存在或已被删除 | 拼单记录不存在 |
| 1011 | 账户待审核，无法登录 | 用户账户待管理员审核 |
| 1012 | 拼单已被其他用户参与 | 拼单已被占用 |

### 3. 用户认证和注册错误码 (2000-2999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 2001 | 邮箱已被注册 | 邮箱地址已被使用 |
| 2002 | 手机号已被注册 | 手机号已被使用 |
| 2003 | 邮箱格式不正确 | 邮箱格式验证失败 |
| 2004 | 手机号格式不正确 | 手机号格式验证失败 |
| 2005 | 账号不能为空 | 登录账号为空 |
| 2006 | 密码不能为空 | 密码为空 |
| 2007 | 两次输入的密码不一致 | 密码确认不匹配 |
| 2008 | 邀请码无效 | 邀请码不存在或已失效 |
| 2009 | 账号不存在 | 登录账号不存在 |
| 2010 | 密码错误 | 登录密码错误 |
| 2011 | 账号格式错误，请输入正确的邮箱或手机号 | 账号格式不正确 |
| 2012 | 邮箱或手机号或密码错误 | 登录凭据错误 |
| 2013 | 账户已被删除，无法登录 | 用户账户已删除 |
| 2014 | 账户已被禁用，无法登录 | 用户账户已禁用 |
| 2015 | 无效的刷新令牌 | 刷新令牌无效 |
| 2016 | 账户已被删除，无法刷新令牌 | 用户账户已删除 |
| 2017 | 账户已被禁用，无法刷新令牌 | 用户账户已禁用 |
| 2018 | 账户待审核，无法刷新令牌 | 用户账户待审核 |
| 2019 | 用户已被删除 | 用户记录已删除 |
| 2020 | 账户已被删除，无法绑定银行卡 | 用户账户已删除 |
| 2021 | 账户已被禁用，无法绑定银行卡 | 用户账户已禁用 |
| 2022 | 卡类型不能为空 | 银行卡类型为空 |
| 2023 | 卡类型不正确，支持的类型：借记卡、信用卡、储蓄卡 | 银行卡类型不支持 |
| 2024 | 用户未绑定银行卡 | 用户未绑定银行卡信息 |
| 2025 | 用户已被删除，无法修改密码 | 用户账户已删除 |
| 2026 | 账户已被禁用，无法修改密码 | 用户账户已禁用 |
| 2027 | 当前密码错误 | 修改密码时当前密码错误 |
| 2028 | 新密码不能与当前密码相同 | 新密码与当前密码相同 |
| 2029 | 密码长度不能少于6位 | 密码长度不足 |
| 2030 | 密码长度不能超过50位 | 密码长度超限 |
| 2031 | 邀请码无效或管理员账户已被禁用 | 邀请码对应的管理员账户被禁用 |
| 2032 | 邀请码对应的管理员账户已被禁用 | 邀请码对应的管理员账户被禁用 |

### 4. 业务逻辑错误码 (3000-3999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 3001 | 余额不足 | 用户钱包余额不足 |
| 3002 | 拼单已满员 | 拼单人数已满 |
| 3003 | 拼单已过期 | 拼单活动已结束 |
| 3004 | 订单金额不匹配 | 订单金额与配置不匹配 |
| 3005 | 提现金额超限 | 提现金额超过限制 |
| 3006 | 状态类型参数无效，必须是1(进行中)、2(已完成)或3(拼单数据) | 订单状态参数错误 |
| 3007 | 无权访问此订单 | 用户无权访问指定订单 |
| 3008 | 订单金额必须大于0 | 订单金额验证失败 |
| 3009 | 利润金额不能为负数 | 利润金额验证失败 |
| 3010 | 至少需要有一个任务数量大于0 | 任务数量验证失败 |
| 3011 | 任务数量不能为负数 | 任务数量验证失败 |
| 3012 | 钱包已被冻结，无法创建订单 | 钱包状态异常 |
| 3013 | 钱包已被冻结，无法充值 | 钱包状态异常 |
| 3014 | 充值金额必须大于0 | 充值金额验证失败 |
| 3015 | 单笔充值金额不能超过100万元 | 充值金额超限 |
| 3016 | 钱包已被冻结，无法提现 | 钱包状态异常 |
| 3017 | 提现金额必须大于0 | 提现金额验证失败 |
| 3018 | 单笔提现金额不能超过100万元 | 提现金额超限 |
| 3019 | 请先绑定银行卡后再进行提现操作 | 银行卡未绑定 |
| 3020 | 登录密码错误 | 提现时密码验证失败 |
| 3021 | 超过每日提现限额 | 每日提现限额超限 |
| 3022 | 期数不存在 | 指定期数不存在 |
| 3023 | 期数还未开始 | 期数活动未开始 |
| 3024 | 期数已结束 | 期数活动已结束 |
| 3025 | 您已经购买过期号的订单 | 用户已购买该期数订单 |

### 5. 银行卡相关错误码 (4000-4999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 4001 | 银行卡号长度不正确，应为13-19位 | 银行卡号长度错误 |
| 4002 | 银行卡号只能包含数字 | 银行卡号格式错误 |
| 4003 | 持卡人姓名不能为空 | 持卡人姓名为空 |
| 4004 | 持卡人姓名长度应在2-50个字符之间 | 持卡人姓名长度错误 |
| 4005 | 持卡人姓名只能包含中文、英文字母和空格 | 持卡人姓名格式错误 |
| 4006 | 银行名称不能为空 | 银行名称为空 |
| 4007 | 银行名称长度应在2-50个字符之间 | 银行名称长度错误 |

### 6. Token相关错误码 (5000-5999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 5001 | token验证失败 | Token验证失败 |
| 5002 | 您的账号已在其他设备登录，请重新登录 | 单点登录踢出 |
| 5003 | 无效的令牌 | JWT令牌无效 |
| 5004 | 令牌已过期 | JWT令牌已过期 |

### 7. 系统配置错误码 (6000-6999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 6001 | 读取配置文件失败 | 配置文件读取失败 |
| 6002 | 解析配置文件失败 | 配置文件解析失败 |
| 6003 | 配置未加载 | 配置未正确加载 |
| 6004 | 数据库主机地址不能为空 | 数据库配置错误 |
| 6005 | 数据库用户名不能为空 | 数据库配置错误 |
| 6006 | 数据库名称不能为空 | 数据库配置错误 |
| 6007 | Redis主机地址不能为空 | Redis配置错误 |
| 6008 | JWT密钥不能为空 | JWT配置错误 |
| 6009 | 连接数据库失败 | 数据库连接失败 |
| 6010 | 获取数据库实例失败 | 数据库实例获取失败 |
| 6011 | 数据库未初始化 | 数据库未初始化 |
| 6012 | 数据库迁移失败 | 数据库迁移失败 |
| 6013 | Redis连接测试失败 | Redis连接失败 |

### 8. 工具类错误码 (7000-7999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 7001 | 无法生成唯一邀请码，请稍后重试 | 邀请码生成失败 |
| 7002 | 重复请求，幂等键已存在 | 重复请求检测 |
| 7003 | 记录不存在 | 数据库记录不存在 |

### 9. 中间件错误码 (8000-8999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 8001 | 请求过于频繁，请稍后再试 | 限流触发 |
| 8002 | 系统繁忙，请稍后再试 | 系统繁忙 |
| 8003 | 当前系统不允许注册 | 注册功能关闭 |

### 10. 服务层错误码 (9000-9999)
| 错误码 | 错误消息 | 说明 |
|--------|----------|------|
| 9001 | 获取热榜数据失败 | 热榜数据获取失败 |
| 9002 | 加密密码失败 | 密码加密失败 |
| 9003 | 创建用户失败 | 用户创建失败 |
| 9004 | 查询用户失败 | 用户查询失败 |
| 9005 | 银行卡信息格式错误 | 银行卡信息格式错误 |
| 9006 | 更新银行卡信息失败 | 银行卡信息更新失败 |
| 9007 | 密码加密失败 | 密码加密失败 |
| 9008 | 更新密码失败 | 密码更新失败 |
| 9009 | 获取用户信息失败 | 用户信息获取失败 |
| 9010 | 订单数据验证失败 | 订单数据验证失败 |
| 9011 | 获取钱包失败 | 钱包获取失败 |
| 9012 | 扣减余额失败 | 余额扣减失败 |
| 9013 | 更新钱包失败 | 钱包更新失败 |
| 9014 | 创建订单失败 | 订单创建失败 |
| 9015 | 获取价格配置失败 | 价格配置获取失败 |
| 9016 | 获取订单列表失败 | 订单列表获取失败 |
| 9017 | 获取拼单列表失败 | 拼单列表获取失败 |
| 9018 | 获取订单详情失败 | 订单详情获取失败 |
| 9019 | 获取订单统计失败 | 订单统计获取失败 |
| 9020 | 获取期数信息失败 | 期数信息获取失败 |
| 9021 | 解析价格配置失败 | 价格配置解析失败 |
| 9022 | 检查期号重复失败 | 期号重复检查失败 |
| 9023 | 获取用户等级信息失败 | 用户等级信息获取失败 |
| 9024 | 解析用户等级信息失败 | 用户等级信息解析失败 |
| 9025 | 序列化用户等级信息失败 | 用户等级信息序列化失败 |
| 9026 | 存储用户等级信息失败 | 用户等级信息存储失败 |
| 9027 | 获取用户资金记录失败 | 用户资金记录获取失败 |
| 9028 | 用户不存在 | 用户不存在 |
| 9029 | 用户账户已被禁用，无法创建钱包 | 用户账户被禁用 |
| 9030 | 创建钱包失败 | 钱包创建失败 |
| 9031 | 创建交易记录失败 | 交易记录创建失败 |
| 9032 | 创建充值申请失败 | 充值申请创建失败 |
| 9033 | 创建提现申请失败 | 提现申请创建失败 |
| 9034 | 查询今日提现记录失败 | 今日提现记录查询失败 |
| 9035 | 查询待处理提现记录失败 | 待处理提现记录查询失败 |
| 9036 | 获取交易详情失败 | 交易详情获取失败 |

## 使用说明

### 1. 错误码命名规范
- 系统级错误码：0-999
- 数据库和缓存错误码：1000-1999
- 用户认证和注册错误码：2000-2999
- 业务逻辑错误码：3000-3999
- 银行卡相关错误码：4000-4999
- Token相关错误码：5000-5999
- 系统配置错误码：6000-6999
- 工具类错误码：7000-7999
- 中间件错误码：8000-8999
- 服务层错误码：9000-9999

### 2. 错误码使用原则
- 每个错误码对应一种具体的错误情况
- 错误消息应该清晰明确，便于用户理解
- 错误码应该具有层次性，便于分类管理
- 新增错误码时应该遵循现有的分类规则

### 3. 错误处理建议
- 在控制器层使用 `utils.ErrorWithMessage()` 返回具体错误
- 在服务层使用 `fmt.Errorf()` 包装底层错误
- 在数据访问层使用 `errors.New()` 返回基础错误
- 避免在错误消息中暴露敏感信息

## 更新记录
- 2024-01-01：初始版本，包含所有项目中发现的错误情况 