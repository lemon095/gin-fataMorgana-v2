# Cron表达式格式说明

## 概述

本项目使用 `github.com/robfig/cron/v3` 包，该包默认使用6个字段的cron表达式格式（包含秒）。

## 字段格式

```
秒 分 时 日 月 星期
```

### 字段说明

| 字段 | 允许值 | 特殊字符 |
|------|--------|----------|
| 秒   | 0-59   | * / , - |
| 分   | 0-59   | * / , - |
| 时   | 0-23   | * / , - |
| 日   | 1-31   | * / , - ? |
| 月   | 1-12   | * / , - |
| 星期 | 0-7    | * / , - ? |

## 常用表达式示例

### 订单生成任务

```yaml
# 每5分钟生成订单
cron_expression: "0 */5 * * * *"

# 每10分钟生成订单
cron_expression: "0 */10 * * * *"

# 每小时生成订单
cron_expression: "0 0 * * * *"

# 每天凌晨2点生成订单
cron_expression: "0 0 2 * * *"
```

### 数据清理任务

```yaml
# 每天凌晨2点清理数据
cleanup_cron: "0 0 2 * * *"

# 每天凌晨3点清理数据
cleanup_cron: "0 0 3 * * *"

# 每周日凌晨2点清理数据
cleanup_cron: "0 0 2 * * 0"
```

## 特殊字符说明

- `*`: 表示每个时间单位
- `/`: 表示间隔，如 `*/5` 表示每5个单位
- `,`: 表示多个值，如 `1,3,5` 表示第1、3、5个单位
- `-`: 表示范围，如 `1-5` 表示第1到第5个单位
- `?`: 用于日和星期字段，表示不指定具体值

## 注意事项

1. **6个字段**: 必须包含秒字段，总共6个字段
2. **星期字段**: 0和7都表示星期日
3. **日和星期**: 日和星期字段不能同时指定具体值，其中一个必须使用 `?`

## 常见错误

### 错误示例

```yaml
# ❌ 错误：只有5个字段
cron_expression: "*/5 * * * *"

# ❌ 错误：日和星期都指定了具体值
cron_expression: "0 0 2 1 * 1"

# ❌ 错误：秒字段超出范围
cron_expression: "60 */5 * * * *"
```

### 正确示例

```yaml
# ✅ 正确：6个字段，包含秒
cron_expression: "0 */5 * * * *"

# ✅ 正确：使用 ? 表示不指定星期
cron_expression: "0 0 2 1 * ?"

# ✅ 正确：使用 ? 表示不指定日
cron_expression: "0 0 2 ? * 1"
```

## 测试工具

可以使用在线cron表达式验证工具来测试表达式是否正确：

- https://crontab.guru/
- https://www.freeformatter.com/cron-expression-generator-quartz.html

注意：这些工具可能使用不同的格式，请确保选择"包含秒"的选项。 